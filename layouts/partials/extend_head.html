{{- /* PaperMod extend_head: TOC droite (flex) + Sommaire + numÃ©rotation compacte + largeur desktop */ -}}
<style type="text/css">
/* â”€â”€ Variables rÃ©glables â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
:root{
  /* Mise en page */
  --main-width: 1200px;   /* largeur max de la page sur PC */
  --toc-w: 240px;         /* largeur colonne TOC (220/240/260/280â€¦) */
  --toc-gap: 1.25rem;     /* Ã©cart entre texte et TOC */
  --toc-z: 120;           /* prioritÃ© dâ€™empilement de la TOC */

  /* NumÃ©rotation (espacement ultra-compact) */
  --num-gap: .12em;  /* espace entre numÃ©ro et texte */
  --num-w2: 1.3ch;   /* largeur mini H2 "1."    */
  --num-w3: 2.3ch;   /* largeur mini H3 "1.1"   */
  --num-w4: 3.3ch;   /* largeur mini H4 "1.1.1" */

  /* Tags (couleurs faÃ§on home) */
  --tag-fg: #1E90FF;                 /* clair */
  --tag-bg: rgba(127,127,127,.15);
  --tag-fg-hover-light: #003366;
  --tag-bg-hover-light: rgba(127,127,127,.40);
}
html.dark, body.dark{
  --tag-fg: #9ecbff;                 /* sombre */
  --tag-bg: rgba(255,255,255,.15);
  --tag-fg-hover-dark: #ffffff;
  --tag-bg-hover-dark: rgba(255,255,255,.30);
}

/* Ã‰largir uniquement les pages article */
@media (min-width: 1200px){
  body.single .main { max-width: var(--main-width, 1200px); }
}

/* ===== Layout activÃ© quand le JS a prÃ©parÃ© le DOM (.toc-ready) ===== */
.post-content.toc-ready{
  display: flex !important;
  align-items: flex-start;
  gap: var(--toc-gap);
}

/* Colonne texte */
.post-content.toc-ready > .content-col{
  flex: 1 1 auto;
  min-width: 0;
}

/* Colonne TOC (sticky, carte, au-dessus) */
.post-content.toc-ready > #TableOfContents,
.post-content.toc-ready > .toc{
  flex: 0 0 var(--toc-w);
  max-width: var(--toc-w);
  position: sticky;
  top: 5rem;
  max-height: calc(100vh - 7rem);
  overflow: auto;

  background: var(--entry);
  border: 1px solid var(--border);
  border-radius: .5rem;
  padding: .75rem .85rem;

  z-index: var(--toc-z);
  isolation: isolate;
}

/* LibellÃ© non-numÃ©rotÃ© au-dessus de la TOC */
.post-content.toc-ready > .toc::before,
.post-content.toc-ready > #TableOfContents::before{
  content: "Sommaire";
  display: block;
  margin: 0 0 .45rem;
  font-size: .95rem;
  font-weight: 600;
  opacity: .8;
}
/* Masquer un Ã©ventuel <summary> interne du thÃ¨me */
.post-content.toc-ready > .toc details > summary{ display: none; }

/* Liste interne TOC propre */
.post-content #TableOfContents > ul{ margin: 0; padding-left: 1rem; }

/* Ã‰viter que des blocs passent au-dessus de la TOC */
.post-content pre, .post-content .highlight, .post-content .chroma,
.post-content figure, .post-content .code-toolbar, .post-content .copy-code{
  position: relative; z-index: 1;
}

/* ===== Titres: alignÃ©s Ã  gauche + numÃ©rotation compacte ===== */
.content-col{ counter-reset: h2counter; }
.content-col h2{ counter-reset: h3counter; }
.content-col h3{ counter-reset: h4counter; }
.content-col h2, .content-col h3, .content-col h4{ text-align: left !important; }

.content-col h2::before,
.content-col h3::before,
.content-col h4::before{
  display: inline-block;
  font-variant-numeric: tabular-nums; /* chiffres Ã  chasse fixe */
  white-space: nowrap;
  margin-right: var(--num-gap);
}

.content-col h2::before{
  counter-increment: h2counter;
  content: counter(h2counter) ". ";
  min-width: var(--num-w2);
}
.content-col h3::before{
  counter-increment: h3counter;
  content: counter(h2counter) "." counter(h3counter) " ";
  min-width: var(--num-w3);
}
.content-col h4::before{
  counter-increment: h4counter;
  content: counter(h2counter) "." counter(h3counter) "." counter(h4counter) " ";
  min-width: var(--num-w4);
}

/* ===== NumÃ©rotation dans la TOC (mÃªme serrage) ===== */
.post-content #TableOfContents > ul{ counter-reset: toc-h2; }
.post-content #TableOfContents > ul > li{ counter-increment: toc-h2; }
.post-content #TableOfContents > ul > li > a::before{
  content: counter(toc-h2) ". ";
  margin-right: var(--num-gap);
  display: inline-block;
}
.post-content #TableOfContents > ul > li > ul{ counter-reset: toc-h3; }
.post-content #TableOfContents > ul > li > ul > li{ counter-increment: toc-h3; }
.post-content #TableOfContents > ul > li > ul > li > a::before{
  content: counter(toc-h2) "." counter(toc-h3) " ";
  margin-right: var(--num-gap);
  display: inline-block;
}
.post-content #TableOfContents > ul > li > ul > li > ul{ counter-reset: toc-h4; }
.post-content #TableOfContents > ul > li > ul > li > ul > li{ counter-increment: toc-h4; }
.post-content #TableOfContents > ul > li > ul > li > ul > li > a::before{
  content: counter(toc-h2) "." counter(toc-h3) "." counter(toc-h4) " ";
  margin-right: var(--num-gap);
  display: inline-block;
}

/* ===== Tags (chips) sous le rÃ©sumÃ© ===== */
.post-tags-line{
  display: flex;
  flex-wrap: wrap;
  gap: .4rem;
  margin: .6rem 0 1rem;
}
.post-tags-line a{
  font-size: .85rem;
  font-weight: 700;
  text-decoration: none;
  color: var(--tag-fg);
  background-color: var(--tag-bg);
  padding: .08rem .4rem;
  border-radius: 999px;
  transition: color .2s, background-color .2s;
}
html:not(.dark) .post-tags-line a:hover,
html:not(.dark) .post-tags-line a:focus-visible{
  color: var(--tag-fg-hover-light);
  background-color: var(--tag-bg-hover-light);
}
html.dark .post-tags-line a:hover,
html.dark .post-tags-line a:focus-visible,
body.dark .post-tags-line a:hover,
body.dark .post-tags-line a:focus-visible{
  color: var(--tag-fg-hover-dark);
  background-color: var(--tag-bg-hover-dark);
}

/* ===== Responsive : pile en 1 colonne sous 1024px ===== */
@media (max-width: 1024px){
  .post-content.toc-ready{ display: block !important; }
  .post-content.toc-ready > #TableOfContents,
  .post-content.toc-ready > .toc{
    position: static;
    max-height: none;
    margin: 1rem 0;
    max-width: none;
    flex: 1 1 auto;
  }
}

/* === Admonitions (note/tip/info/warning/caution) === */
.admonition{
  margin: 1rem 0;
  padding: .75rem .85rem;
  border: 1px solid var(--border);
  border-left-width: .35rem;
  border-radius: .5rem;
  background: var(--entry);
}
.admonition .admonition-title{
  margin: 0 0 .35rem;
  font-weight: 700;
}
.admonition .admonition-content > *:first-child{ margin-top: 0; }
.admonition .admonition-content > *:last-child{  margin-bottom: 0; }

/* Couleurs par type */
.admonition-note    { border-left-color: #888; }
.admonition-tip     { border-left-color: #2e7d32; }   /* vert */
.admonition-info    { border-left-color: #1565c0; }   /* bleu */
.admonition-warning { border-left-color: #c62828; }   /* rouge */
.admonition-caution { border-left-color: #ef6c00; }   /* orange */

/* Petites icÃ´nes en titre (optionnelles) */
.admonition-note    .admonition-title::before{ content:"ðŸ“ "; }
.admonition-tip     .admonition-title::before{ content:"ðŸ’¡ "; }
.admonition-info    .admonition-title::before{ content:"â„¹ï¸ "; }
.admonition-warning .admonition-title::before{ content:"âš ï¸ "; }
.admonition-caution .admonition-title::before{ content:"â— "; }

/* TOC: scrollbar fine et discrÃ¨te */
.post-content.toc-ready > #TableOfContents,
.post-content.toc-ready > .toc{
  scrollbar-width: thin;                       /* Firefox */
  scrollbar-color: var(--border) transparent;  /* Firefox */
}

/* Chromium/WebKit */
.post-content.toc-ready > #TableOfContents::-webkit-scrollbar,
.post-content.toc-ready > .toc::-webkit-scrollbar{
  width: 6px; height: 6px;
}
.post-content.toc-ready > #TableOfContents::-webkit-scrollbar-thumb,
.post-content.toc-ready > .toc::-webkit-scrollbar-thumb{
  background-color: var(--border);
  border-radius: 8px;
}
.post-content.toc-ready > #TableOfContents::-webkit-scrollbar-track,
.post-content.toc-ready > .toc::-webkit-scrollbar-track{
  background: transparent;
}

/* Garder lâ€™ancre visible sous le header sticky */
.content-col h2[id],
.content-col h3[id],
.content-col h4[id]{
  scroll-margin-top: 5.5rem;  /* ajuste si besoin (4.5remâ€“7rem) */
}
/* Surlignage recherche */
:root{
  --search-hit-bg: #ffea7a;          /* clair */
  --search-hit-current-bg: #ffd24d;  /* clair courant */
}
html.dark, body.dark{
  --search-hit-bg: #6a5d1a;          /* sombre */
  --search-hit-current-bg: #8a7720;  /* sombre courant */
}
mark.search-hit{
  background: var(--search-hit-bg);
  color: inherit;
  padding: 0 .06em;
  border-radius: 2px;
}
mark.search-hit-current{
  background: var(--search-hit-current-bg);
  outline: 1px solid var(--border);
}
</style>
