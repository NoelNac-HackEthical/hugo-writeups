{{ define "main" }}
<main id="main" class="home-min">
  {{/* Intro slogan lu depuis content/_index.md (.Description).
       Fallback : .Site.Params.description si _index.md est vide */}}
  {{ $intro := cond (ne .Description "") .Description .Site.Params.description }}
  {{ with $intro }}
    <section class="home-intro" aria-label="Slogan du site">
      <p>{{ . }}</p>
    </section>
  {{ end }}

  {{/* Sections à afficher sur la home : prends depuis la config (params.mainSections) */}}
  {{ $main := .Site.Params.mainSections | default (slice "posts") }}

  {{/* Récupère les pages des sections ciblées, triées par date décroissante */}}
  {{ $pages := where .Site.RegularPages "Section" "in" $main }}
  {{ $ordered := $pages.ByDate.Reverse }}

  {{/* Pagination */}}
  {{ $p := .Paginate $ordered }}

  <ul class="post-list">
    {{ range $p.Pages }}
      {{/* Utilise ton template summary => encadré + image + tags reviennent */}}
      {{ .Render "summary" }}
    {{ end }}
  </ul>

  {{ if gt $p.TotalPages 1 }}
  <nav class="pager">
    {{ if $p.HasPrev }}<a href="{{ $p.Prev.URL | relURL }}">← Plus récents</a>{{ end }}
    <span>Page {{ $p.PageNumber }} / {{ $p.TotalPages }}</span>
    {{ if $p.HasNext }}<a href="{{ $p.Next.URL | relURL }}">Plus anciens →</a>{{ end }}
  </nav>
  {{ end }}
</main>
{{ end }}
