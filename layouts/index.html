{{ define "main" }}
<main id="main" class="home-min">

  {{/* === Titre (H1) + Slogan === */}}
  {{/* Choix du titre : content/_index.md > fallback Site.Title */}}
  {{ $homeTitle := cond (ne .Title "") .Title .Site.Title }}

  {{/* Slogan : .Description ou fallback config.params.description */}}
  {{ $intro := cond (ne .Description "") .Description .Site.Params.description }}

  <section class="home-intro" aria-label="Présentation du site">
    {{ with $homeTitle }}
      <h1 class="home-title">{{ . }}</h1>
    {{ end }}

    {{ with $intro }}
      <p>{{ . }}</p>
    {{ end }}
  </section>


  {{/* === Détermination des sections principales === */}}
  {{/* PaperMod lit params.mainSections ; fallback sur "posts" */}}
  {{ $main := .Site.Params.mainSections | default (slice "posts") }}

  {{/* === Récupération des pages appartenant aux sections sélectionnées === */}}
  {{ $pages := where .Site.RegularPages "Section" "in" $main }}
  {{ $ordered := $pages.ByDate.Reverse }}

  {{/* === Pagination === */}}
  {{ $p := .Paginate $ordered 6}}

  <ul class="post-list">
    {{ range $p.Pages }}
      {{/* Utilise ton template summary.html chiffré et SEO-friendly */}}
      {{ if eq .Section "writeups" }}
        {{ partial "writeups/summary.html" . }}
      {{ else }}
        {{ .Render "summary" }}
      {{ end }}
    {{ end }}
  </ul>

  {{ if gt $p.TotalPages 1 }}
  <nav class="pager">
    {{ if $p.HasPrev }}
      <a href="{{ $p.Prev.URL | relURL }}">← Plus récents</a>
    {{ end }}

    <span>Page {{ $p.PageNumber }} / {{ $p.TotalPages }}</span>

    {{ if $p.HasNext }}
      <a href="{{ $p.Next.URL | relURL }}">Plus anciens →</a>
    {{ end }}
  </nav>
  {{ end }}

</main>
{{ end }}
